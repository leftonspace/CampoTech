<?xml version="1.0" encoding="UTF-8"?>
<autonomous_task>
  <metadata>
    <title>CampoTech Full Project Audit &amp; Consolidation</title>
    <version>1.0.0</version>
    <created>2024-12-15</created>
    <working_directory>D:\projects\CampoTech</working_directory>
    <goal>Get apps/web fully working as the single production app before Argentina launch</goal>
    <estimated_time>4-6 hours</estimated_time>
  </metadata>

  <overview>
    <current_problems>
      <problem id="1">Root URL (/) returns 404 - no page.tsx</problem>
      <problem id="2">5 separate Next.js apps created instead of unified app</problem>
      <problem id="3">Customer portal is separate app instead of route in main app</problem>
      <problem id="4">Year 2 features (Phase 14, 15) built prematurely</problem>
      <problem id="5">Unclear which app is "the product"</problem>
    </current_problems>
    
    <target_state>
      <item>apps/web = THE PRODUCT (business dashboard + customer portal)</item>
      <item>apps/mobile = Technician app (Expo/React Native)</item>
      <item>Everything else = archived or deleted</item>
      <item>Single deployment, single domain</item>
    </target_state>
  </overview>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 1: AUDIT APPS/WEB STRUCTURE                                           -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="1" name="Audit apps/web Structure">
    <description>Understand exactly what exists in the main app</description>

    <step id="1.1" name="List App Directory Structure">
      <command>Get-ChildItem -Path "apps/web/app" -Recurse -Directory | Select-Object FullName</command>
      <alternative>find apps/web/app -type d</alternative>
      <purpose>See all routes/pages that exist</purpose>
    </step>

    <step id="1.2" name="Check for Root Page">
      <command>Get-ChildItem -Path "apps/web/app" -Filter "page.tsx" | Select-Object Name</command>
      <alternative>ls apps/web/app/page.tsx 2>/dev/null || echo "MISSING"</alternative>
      <expected>page.tsx should exist</expected>
      <if_missing>Create landing page or redirect</if_missing>
    </step>

    <step id="1.3" name="List All Page Files">
      <command>Get-ChildItem -Path "apps/web/app" -Recurse -Filter "page.tsx" | Select-Object FullName</command>
      <alternative>find apps/web/app -name "page.tsx"</alternative>
      <purpose>See all accessible routes</purpose>
    </step>

    <step id="1.4" name="Check API Routes">
      <command>Get-ChildItem -Path "apps/web/app/api" -Recurse -Filter "route.ts" | Select-Object FullName</command>
      <alternative>find apps/web/app/api -name "route.ts"</alternative>
      <purpose>See all API endpoints</purpose>
    </step>

    <step id="1.5" name="Document Current Routes">
      <output_format>
        Create a table of all routes:
        | Route | File | Purpose | Status |
        |-------|------|---------|--------|
        | / | app/page.tsx | Landing/Home | ? |
        | /login | app/login/page.tsx | Auth | ? |
        | /dashboard | app/dashboard/page.tsx | Main dashboard | ? |
        | ... | ... | ... | ... |
      </output_format>
    </step>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 2: FIX ROOT PAGE (404 FIX)                                            -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="2" name="Fix Root Page 404">
    <description>Add the missing root page</description>

    <step id="2.1" name="Option A: Simple Redirect">
      <file>apps/web/app/page.tsx</file>
      <content>
import { redirect } from 'next/navigation';

export default function Home() {
  redirect('/login');
}
      </content>
      <note>Quick fix - redirects to login immediately</note>
    </step>

    <step id="2.2" name="Option B: Landing Page">
      <file>apps/web/app/page.tsx</file>
      <description>Use the landing page component we created earlier</description>
      <action>Copy campotech-landing-page.tsx content to apps/web/app/page.tsx</action>
    </step>

    <step id="2.3" name="Option C: Conditional Redirect">
      <file>apps/web/app/page.tsx</file>
      <content>
import { redirect } from 'next/navigation';
import { getServerSession } from 'next-auth'; // or your auth method

export default async function Home() {
  const session = await getServerSession();
  
  if (session) {
    redirect('/dashboard');
  } else {
    redirect('/login');
  }
}
      </content>
      <note>Best UX - logged in users go to dashboard, others to login</note>
    </step>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 3: AUDIT OTHER APPS (WHAT TO KEEP/DELETE)                             -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="3" name="Audit Other Apps">
    <description>Decide what to do with each app in /apps folder</description>

    <app name="apps/web" decision="KEEP - This is THE product">
      <status>Main business dashboard</status>
      <action>Fix and enhance</action>
      <priority>P0</priority>
    </app>

    <app name="apps/mobile" decision="KEEP - Technician app needed">
      <status>React Native/Expo app for technicians</status>
      <action>Verify it works, test on device</action>
      <priority>P1 - Need for launch</priority>
      <check>
        <command>cd apps/mobile &amp;&amp; npm install &amp;&amp; npx expo start</command>
      </check>
    </app>

    <app name="apps/customer-portal" decision="MERGE OR DEFER">
      <status>Separate Next.js app for customer job tracking</status>
      <options>
        <option id="A" recommended="true">
          Merge into apps/web as /portal or /customer route
          - Same deployment
          - Shared auth
          - Less maintenance
        </option>
        <option id="B">
          Keep separate but defer to post-launch
          - Move to apps/_archived/customer-portal
          - Focus on core product first
        </option>
      </options>
      <priority>P2 - Nice to have for launch</priority>
    </app>

    <app name="apps/developer-portal" decision="ARCHIVE - Year 2">
      <status>API docs for third-party devs</status>
      <action>Move to apps/_archived/developer-portal</action>
      <priority>P3 - Not needed for launch</priority>
      <reason>You don't have third-party developers yet</reason>
    </app>

    <app name="apps/consumer-mobile" decision="ARCHIVE - Year 2">
      <status>Consumer marketplace app</status>
      <action>Move to apps/_archived/consumer-mobile</action>
      <priority>P3 - Phase 15, Year 2 feature</priority>
      <reason>Focus on B2B first, marketplace later</reason>
    </app>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 4: CONSOLIDATE - MERGE CUSTOMER PORTAL INTO WEB                       -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="4" name="Merge Customer Portal (Optional but Recommended)">
    <description>Integrate customer-facing features into main app</description>

    <step id="4.1" name="Analyze Customer Portal Pages">
      <command>Get-ChildItem -Path "apps/customer-portal/app" -Recurse -Filter "page.tsx"</command>
      <purpose>See what pages exist in customer portal</purpose>
    </step>

    <step id="4.2" name="Create Customer Route Group in Web">
      <structure>
apps/web/app/
├── (business)/              # Existing business routes (group)
│   ├── dashboard/
│   ├── jobs/
│   ├── invoices/
│   ├── inventory/
│   └── ...
├── (customer)/              # NEW: Customer portal routes (group)
│   ├── portal/
│   │   ├── page.tsx         # Customer dashboard
│   │   ├── jobs/
│   │   │   └── [id]/page.tsx  # Job detail + tracking
│   │   ├── invoices/
│   │   │   └── page.tsx     # Customer invoices
│   │   └── payments/
│   │       └── page.tsx     # Make payment
│   └── track/
│       └── [jobId]/page.tsx # Public tracking link (no auth)
├── login/                   # Business login
├── portal-login/            # Customer login (magic link)
└── page.tsx                 # Landing page
      </structure>
    </step>

    <step id="4.3" name="Copy Customer Portal Components">
      <commands>
        <command>Copy-Item -Path "apps/customer-portal/components/*" -Destination "apps/web/components/customer/" -Recurse</command>
        <command>Copy-Item -Path "apps/customer-portal/lib/*" -Destination "apps/web/lib/customer/" -Recurse</command>
      </commands>
    </step>

    <step id="4.4" name="Add Customer Auth Route">
      <file>apps/web/app/portal-login/page.tsx</file>
      <description>Magic link login for customers (email/phone, no password)</description>
      <content>
'use client';

import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';

export default function CustomerPortalLogin() {
  const [email, setEmail] = useState('');
  const [phone, setPhone] = useState('');
  const [sent, setSent] = useState(false);

  const handleEmailLogin = async () => {
    await fetch('/api/auth/customer/magic-link', {
      method: 'POST',
      body: JSON.stringify({ email }),
    });
    setSent(true);
  };

  const handlePhoneLogin = async () => {
    await fetch('/api/auth/customer/otp', {
      method: 'POST', 
      body: JSON.stringify({ phone }),
    });
    // Redirect to OTP verification
  };

  if (sent) {
    return (
      &lt;div className="min-h-screen flex items-center justify-center"&gt;
        &lt;div className="text-center"&gt;
          &lt;h1 className="text-2xl font-bold mb-4"&gt;Revisá tu email&lt;/h1&gt;
          &lt;p className="text-gray-600"&gt;Te enviamos un enlace para ingresar&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;div className="min-h-screen flex items-center justify-center bg-gray-50"&gt;
      &lt;div className="max-w-md w-full p-8 bg-white rounded-xl shadow-sm"&gt;
        &lt;h1 className="text-2xl font-bold text-center mb-2"&gt;Portal de Clientes&lt;/h1&gt;
        &lt;p className="text-gray-600 text-center mb-6"&gt;
          Ingresá para ver tus trabajos, facturas y más
        &lt;/p&gt;

        &lt;Tabs defaultValue="email"&gt;
          &lt;TabsList className="grid w-full grid-cols-2"&gt;
            &lt;TabsTrigger value="email"&gt;Email&lt;/TabsTrigger&gt;
            &lt;TabsTrigger value="phone"&gt;Teléfono&lt;/TabsTrigger&gt;
          &lt;/TabsList&gt;
          
          &lt;TabsContent value="email" className="space-y-4"&gt;
            &lt;Input
              type="email"
              placeholder="tu@email.com"
              value={email}
              onChange={(e) =&gt; setEmail(e.target.value)}
            /&gt;
            &lt;Button className="w-full" onClick={handleEmailLogin}&gt;
              Enviar enlace de acceso
            &lt;/Button&gt;
          &lt;/TabsContent&gt;
          
          &lt;TabsContent value="phone" className="space-y-4"&gt;
            &lt;Input
              type="tel"
              placeholder="+54 11 1234-5678"
              value={phone}
              onChange={(e) =&gt; setPhone(e.target.value)}
            /&gt;
            &lt;Button className="w-full" onClick={handlePhoneLogin}&gt;
              Enviar código SMS
            &lt;/Button&gt;
          &lt;/TabsContent&gt;
        &lt;/Tabs&gt;

        &lt;p className="text-xs text-gray-500 text-center mt-6"&gt;
          Sin contraseña. Te enviamos un enlace seguro.
        &lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
      </content>
    </step>

    <step id="4.5" name="Archive Original Customer Portal">
      <commands>
        <command>mkdir -p apps/_archived</command>
        <command>mv apps/customer-portal apps/_archived/customer-portal</command>
      </commands>
    </step>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 5: ARCHIVE YEAR 2 APPS                                                -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="5" name="Archive Year 2 Apps">
    <description>Move premature implementations out of active development</description>

    <step id="5.1" name="Create Archive Folder">
      <command>mkdir -p apps/_archived</command>
    </step>

    <step id="5.2" name="Archive Developer Portal">
      <command>mv apps/developer-portal apps/_archived/developer-portal</command>
      <reason>Phase 14 - Not needed until you have API customers</reason>
    </step>

    <step id="5.3" name="Archive Consumer Mobile">
      <command>mv apps/consumer-mobile apps/_archived/consumer-mobile</command>
      <reason>Phase 15 - Marketplace is Year 2 feature</reason>
    </step>

    <step id="5.4" name="Update Root package.json">
      <file>package.json</file>
      <action>Remove archived apps from workspaces if using monorepo</action>
      <before>
"workspaces": [
  "apps/*",
  "packages/*"
]
      </before>
      <after>
"workspaces": [
  "apps/web",
  "apps/mobile",
  "packages/*"
]
      </after>
    </step>

    <step id="5.5" name="Final Apps Structure">
      <expected_structure>
apps/
├── web/                 # THE PRODUCT - Business dashboard + Customer portal
├── mobile/              # Technician app (React Native)
└── _archived/           # Parked for later
    ├── customer-portal/   # Merged into web
    ├── developer-portal/  # Phase 14
    └── consumer-mobile/   # Phase 15
      </expected_structure>
    </step>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 6: VERIFY APPS/WEB COMPLETENESS                                       -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="6" name="Verify apps/web Has All Required Features">
    <description>Check that core MVP features are in the main app</description>

    <checklist name="Core Features (Phase 5: Web Portal)">
      <item route="/login">Business owner login</item>
      <item route="/dashboard">Main dashboard with stats</item>
      <item route="/dashboard/jobs">Job list and management</item>
      <item route="/dashboard/jobs/new">Create new job</item>
      <item route="/dashboard/jobs/[id]">Job detail</item>
      <item route="/dashboard/calendar">Calendar view</item>
      <item route="/dashboard/clients">Client management</item>
      <item route="/dashboard/clients/[id]">Client detail</item>
      <item route="/dashboard/team">Team/employee management</item>
      <item route="/dashboard/invoices">Invoice list</item>
      <item route="/dashboard/invoices/[id]">Invoice detail</item>
      <item route="/dashboard/settings">Settings</item>
    </checklist>

    <checklist name="Inventory Features (Phase 12)">
      <item route="/dashboard/inventory">Inventory dashboard</item>
      <item route="/dashboard/inventory/products">Product list</item>
      <item route="/dashboard/inventory/products/new">Add product</item>
      <item route="/dashboard/inventory/warehouses">Almacenes (Office + Vehicles)</item>
      <item route="/dashboard/inventory/stock">Stock movements</item>
    </checklist>

    <checklist name="Fleet Features">
      <item route="/dashboard/fleet">Vehicle list (Flota)</item>
      <item route="/dashboard/fleet/[id]">Vehicle detail</item>
    </checklist>

    <checklist name="Zones Features (formerly Sucursales)">
      <item route="/dashboard/zones">Zone list</item>
      <item route="/dashboard/zones/[id]">Zone detail + technician assignment</item>
    </checklist>

    <checklist name="WhatsApp Features (Phase 6)">
      <item route="/dashboard/whatsapp">WhatsApp conversations</item>
      <item route="/api/whatsapp/webhook">Webhook endpoint</item>
    </checklist>

    <checklist name="Analytics Features (Phase 10)">
      <item route="/dashboard/analytics">Analytics dashboard</item>
    </checklist>

    <verification_command>
      # Run this to check which pages exist
      find apps/web/app -name "page.tsx" | sed 's|apps/web/app||' | sed 's|/page.tsx||' | sort
    </verification_command>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 7: FIX KNOWN ISSUES                                                   -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="7" name="Fix Known Issues">
    <description>Address issues identified in previous sessions</description>

    <issue id="7.1" name="WhatsApp 500 Errors">
      <symptom>/api/whatsapp/conversations returns 500</symptom>
      <likely_cause>Missing Redis/environment variables on Vercel</likely_cause>
      <fix>
        1. Check Vercel environment variables:
           - REDIS_URL (Upstash)
           - WHATSAPP_API_TOKEN
           - WHATSAPP_PHONE_NUMBER_ID
        2. If Redis not needed for conversations, remove dependency
        3. Add proper error handling
      </fix>
    </issue>

    <issue id="7.2" name="TypeScript Errors">
      <command>cd apps/web &amp;&amp; npx tsc --noEmit 2>&amp;1 | head -50</command>
      <action>Fix any remaining type errors</action>
    </issue>

    <issue id="7.3" name="Missing Environment Variables">
      <file>apps/web/.env.example</file>
      <action>Document all required env vars</action>
      <required_vars>
        DATABASE_URL=postgresql://...
        DIRECT_URL=postgresql://...
        NEXTAUTH_SECRET=...
        NEXTAUTH_URL=https://your-domain.com
        
        # WhatsApp (optional for MVP)
        WHATSAPP_API_TOKEN=
        WHATSAPP_PHONE_NUMBER_ID=
        WHATSAPP_BUSINESS_ACCOUNT_ID=
        WHATSAPP_WEBHOOK_VERIFY_TOKEN=
        
        # Redis (optional)
        REDIS_URL=
        
        # Pusher (for real-time, optional)
        PUSHER_APP_ID=
        PUSHER_KEY=
        PUSHER_SECRET=
        NEXT_PUBLIC_PUSHER_KEY=
        
        # AFIP (required for invoicing)
        AFIP_CUIT=
        AFIP_CERT_PATH=
        AFIP_KEY_PATH=
        AFIP_ENVIRONMENT=testing
      </required_vars>
    </issue>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 8: LOCAL TESTING                                                      -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="8" name="Local Testing">
    <description>Verify everything works locally before deployment</description>

    <step id="8.1" name="Install Dependencies">
      <commands>
        <command>cd apps/web</command>
        <command>npm install</command>
        <command>npx prisma generate</command>
      </commands>
    </step>

    <step id="8.2" name="Run Development Server">
      <command>cd apps/web &amp;&amp; npm run dev</command>
      <verify>
        - http://localhost:3000 → Landing page or redirect (no 404)
        - http://localhost:3000/login → Login page
        - http://localhost:3000/dashboard → Dashboard (after login)
      </verify>
    </step>

    <step id="8.3" name="Run TypeScript Check">
      <command>cd apps/web &amp;&amp; npx tsc --noEmit</command>
      <expected>0 errors</expected>
    </step>

    <step id="8.4" name="Run Build">
      <command>cd apps/web &amp;&amp; npm run build</command>
      <expected>Build succeeds</expected>
    </step>

    <step id="8.5" name="Test Key Flows">
      <tests>
        <test name="Login Flow">
          1. Go to /login
          2. Enter credentials
          3. Should redirect to /dashboard
        </test>
        <test name="Create Job">
          1. Go to /dashboard/jobs
          2. Click "Nuevo Trabajo"
          3. Fill form, save
          4. Job appears in list
        </test>
        <test name="Create Client">
          1. Go to /dashboard/clients
          2. Click "Nuevo Cliente"
          3. Fill form, save
          4. Client appears in list
        </test>
        <test name="Inventory Check">
          1. Go to /dashboard/inventory
          2. View products
          3. Check warehouses shows Office + Vehicles
        </test>
      </tests>
    </step>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 9: DEPLOYMENT                                                         -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="9" name="Deploy to Vercel">
    <description>Get production deployment working</description>

    <step id="9.1" name="Verify Vercel Project Settings">
      <settings>
        - Root Directory: apps/web
        - Framework Preset: Next.js
        - Build Command: npm run build (or default)
        - Output Directory: .next (default)
        - Install Command: npm install
      </settings>
    </step>

    <step id="9.2" name="Set Environment Variables">
      <action>In Vercel dashboard, set all required env vars from .env.example</action>
      <critical_vars>
        - DATABASE_URL
        - DIRECT_URL
        - NEXTAUTH_SECRET
        - NEXTAUTH_URL (set to your Vercel URL)
      </critical_vars>
    </step>

    <step id="9.3" name="Deploy">
      <command>git push origin main</command>
      <alternative>vercel --prod</alternative>
    </step>

    <step id="9.4" name="Verify Production">
      <tests>
        <test>https://campo-tech-rho.vercel.app/ → No 404</test>
        <test>https://campo-tech-rho.vercel.app/login → Login works</test>
        <test>https://campo-tech-rho.vercel.app/dashboard → Dashboard loads</test>
      </tests>
    </step>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- PHASE 10: PRE-ARGENTINA CHECKLIST                                           -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <phase id="10" name="Pre-Argentina Launch Checklist">
    <description>Final verification before going live</description>

    <category name="Core App">
      <item>[ ] Root URL works (no 404)</item>
      <item>[ ] Login/logout works</item>
      <item>[ ] Dashboard loads with data</item>
      <item>[ ] Can create/edit/delete jobs</item>
      <item>[ ] Can create/edit/delete clients</item>
      <item>[ ] Can manage team members</item>
      <item>[ ] Calendar shows jobs</item>
    </category>

    <category name="Inventory">
      <item>[ ] Can add products</item>
      <item>[ ] Warehouses show Office + Vehicles</item>
      <item>[ ] Can transfer stock between locations</item>
      <item>[ ] Zones page works (not Sucursales)</item>
    </category>

    <category name="Invoicing">
      <item>[ ] Can create invoice from job</item>
      <item>[ ] Invoice PDF generates</item>
      <item>[ ] AFIP integration works (or gracefully fails)</item>
    </category>

    <category name="WhatsApp (if enabled)">
      <item>[ ] Webhook receives messages</item>
      <item>[ ] Can view conversations</item>
      <item>[ ] Can send messages</item>
    </category>

    <category name="Mobile App">
      <item>[ ] apps/mobile builds</item>
      <item>[ ] Can login as technician</item>
      <item>[ ] Can see assigned jobs</item>
      <item>[ ] Can update job status</item>
    </category>

    <category name="Infrastructure">
      <item>[ ] Vercel deployment stable</item>
      <item>[ ] Database (Supabase) accessible</item>
      <item>[ ] All env vars set correctly</item>
      <item>[ ] Error monitoring (Sentry) configured</item>
    </category>

    <category name="Data">
      <item>[ ] Seed data loaded (clients, employees, products)</item>
      <item>[ ] Test jobs created for demo</item>
    </category>
  </phase>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- QUICK COMMANDS REFERENCE                                                    -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <quick_commands>
    <section name="Fix 404 (Fastest)">
# Create simple redirect page
echo "import { redirect } from 'next/navigation';
export default function Home() { redirect('/login'); }" > apps/web/app/page.tsx
    </section>

    <section name="Archive Year 2 Apps">
mkdir -p apps/_archived
mv apps/developer-portal apps/_archived/
mv apps/consumer-mobile apps/_archived/
    </section>

    <section name="Local Dev">
cd apps/web
npm install
npx prisma generate
npm run dev
    </section>

    <section name="TypeScript Check">
cd apps/web
npx tsc --noEmit
    </section>

    <section name="Build Test">
cd apps/web
npm run build
    </section>

    <section name="List All Pages">
# PowerShell
Get-ChildItem -Path "apps/web/app" -Recurse -Filter "page.tsx" | Select-Object FullName

# Bash
find apps/web/app -name "page.tsx"
    </section>
  </quick_commands>

  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <!-- SUMMARY                                                                      -->
  <!-- ═══════════════════════════════════════════════════════════════════════════ -->
  <summary>
    <priority_order>
      <task priority="1">Fix root page 404 (5 minutes)</task>
      <task priority="2">Archive Year 2 apps (10 minutes)</task>
      <task priority="3">Verify all routes work locally (30 minutes)</task>
      <task priority="4">Fix any TypeScript errors (varies)</task>
      <task priority="5">Deploy and test production (30 minutes)</task>
      <task priority="6">Merge customer portal (optional, 2-3 hours)</task>
    </priority_order>

    <target_architecture>
      apps/
      ├── web/           # THE PRODUCT
      │   ├── app/
      │   │   ├── page.tsx              # Landing or redirect
      │   │   ├── login/                # Business login
      │   │   ├── dashboard/            # Business dashboard
      │   │   ├── portal-login/         # Customer login (future)
      │   │   └── portal/               # Customer portal (future)
      │   └── ...
      ├── mobile/        # Technician app
      └── _archived/     # Parked for later
    </target_architecture>
  </summary>
</autonomous_task>
